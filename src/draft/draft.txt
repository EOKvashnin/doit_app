<template>
  <div
    class="flex flex-col justify-center items-center w-[251px] h-[330px] bg-white rounded-lg shadow-sm dark:bg-gray-800 p-1 md:p-4"
  >
    <AppLoader v-if="isLoading"></AppLoader>
    <div class="card flex flex-col justify-start items-center" v-else>
      <svg
        class="w-15 h-15 text-gray-800 dark:text-gray-300"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        fill="none"
        viewBox="0 0 24 24"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-width="2"
          d="M4.5 17H4a1 1 0 0 1-1-1 3 3 0 0 1 3-3h1m0-3.05A2.5 2.5 0 1 1 9 5.5M19.5 17h.5a1 1 0 0 0 1-1 3 3 0 0 0-3-3h-1m0-3.05a2.5 2.5 0 1 0-2-4.45m.5 13.5h-7a1 1 0 0 1-1-1 3 3 0 0 1 3-3h3a3 3 0 0 1 3 3 1 1 0 0 1-1 1Zm-1-9.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Z"
        />
      </svg>

      <div>
        <p class="text-md font-semibold text-gray-500 dark:text-gray-400">Всего кандидатов</p>
        <h5
          class="leading-none text-6xl text-center font-semibold text-green-500 dark:text-gray-300 pt-8 pb-1"
        >
          {{ length }}
        </h5>
      </div>
    </div>
  </div>
</template>



<select
            class="select-modal"
            id="cur_status"
            @change="handleSelectChange($event.target.value)"
          >
            <option value="" disabled selected hidden>Обновить статус</option>
            <option value="appointed">Назначено собеседование</option>
            <option value="employed">Трудоустроен(а)</option>
            <option value="fired">Уволен(а)</option>
            <option value="refused">Отказался</option>
            <option value="to_another">Предпочтение другому</option>
            <option value="no_contact">Не выходит на связь</option>
            <option value="not_suitable">Не подходит руководителю</option>
            <option value="no_show">Не пришел(ла) на собеседование</option>
            <option value="thinking">Ушел думать</option>
            <option value="medical_failed">Не прошел медкомиссию</option>
            <option value="medical_referred">Направлен на медкомиссию</option>
          </select>








          <template>
  <h4 v-if="workers.length === 0" class="text-center text-gray-400">Кандидатов пока нет</h4>

  <div v-else class="w-full flex justify-center items-center">
    <div class="relative overflow-x-auto shadow-md sm:rounded-lg w-full my-2">
      <table class="w-full text-sm text-gray-500 dark:text-gray-300 table-fixed">
        <colgroup>
          <col class="w-[3%]" />
          <!-- # -->
          <col class="w-[5%]" />
          <!-- Дата -->
          <col class="w-[3%]" />
          <!-- Время -->
          <col class="w-[13%]" />
          <!-- Должность -->
          <col class="w-[13%]" />
          <!-- ФИО -->
          <col class="w-[10%]" />
          <!-- Телефон -->
          <col class="w-[10%]" />
          <!-- Руководитель -->
          <col class="w-[8%]" />
          <!-- Источник -->
          <col class="w-[10%]" />
          <!-- Статус -->
          <col class="w-[8%]" />
          <!-- Дата тр. -->
          <col class="w-[22%]" />
          <!-- Комментарий -->
        </colgroup>
        <thead class="text-xs text-gray-500 bg-gray-50 dark:bg-gray-700 dark:text-gray-300">
          <tr>
            <th class="px-1 py-1 text-center">№</th>
            <th class="px-1 py-1">Дата собес-я</th>
            <th class="px-1 py-1">Время</th>
            <th class="px-1 py-1">Должность</th>
            <th class="px-1 py-1">ФИО соискателя</th>
            <th class="px-1 py-1">Телефон соискателя</th>
            <th class="px-1 py-1">ФИО Руководителя</th>
            <th class="px-1 py-1">Площадка-источник</th>
            <th class="px-1 py-1">Текущий статус</th>
            <th class="px-1 py-1">Дата трудоустройства</th>
            <th class="px-1 py-1">Комментарий</th>
          </tr>
        </thead>
      </table>

      <div class="tbody-scrollable max-h-[550px] overflow-y-auto">
        <table class="w-full text-sm text-gray-500 dark:text-gray-300 table-fixed">
          <colgroup>
            <col class="w-[3%]" />
            <!-- # -->
            <col class="w-[5%]" />
            <!-- Дата -->
            <col class="w-[3%]" />
            <!-- Время -->
            <col class="w-[13%]" />
            <!-- Должность -->
            <col class="w-[13%]" />
            <!-- ФИО -->
            <col class="w-[10%]" />
            <!-- Телефон -->
            <col class="w-[10%]" />
            <!-- Руководитель -->
            <col class="w-[8%]" />
            <!-- Источник -->
            <col class="w-[10%]" />
            <!-- Статус -->
            <col class="w-[8%]" />
            <!-- Дата тр. -->
            <col class="w-[22%]" />
            <!-- Комментарий -->
          </colgroup>
          <tbody>
            <tr
              class="tr"
              @click="emitOpenCard(w)"
              v-for="(w, idx) in sortedByDateTimeWorkers"
              :key="w.id"
            >
              <td class="h-10 p-4 align-middle">{{ idx + 1 }}</td>
              <td class="td">{{ formatDateTable(w.int_date) }}</td>
              <td class="td">{{ w.int_time }}</td>
              <td class="td">{{ w.position }}</td>
              <td class="td">{{ w.fio }}</td>
              <td class="td">{{ w.phone }}</td>
              <td class="td">{{ w.fioRuc }}</td>
              <td class="td status-cell"><AppSource :source="w.source" /></td>
              <td class="td text-[10px] status-cell"><AppStatus :type="w.cur_status" /></td>
              <td class="td text-center">{{ formatDateTable(w.employment_Date) }}</td>
              <td class="td">{{ w.note }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</template>